{% load static %}
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

<div class="tab-pane active" id="general_form">
    <div class="card">
        <div class="card-body">
            <h4>General Form</h4>
            <div class="form-row">
                <form method="POST" action="/case/edit/{{case_no}}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="row ml-2">
                        <div class="col">
                            <div class="row">
                                <div class="col">
                                    <label for="police">Assigned police</label>
                                    <select multiple data-style="bg-white rounded-pill px-4 py-3 shadow-sm"
                                        title="Assign Police" class="form-control selectpicker w-100" name="allowed_polices"
                                        id="police" data-live-search="true">
                                        {% for p in police_list %}
                                            <option {% if p in allowed_police_set %} selected  {% endif %} value="{{ p.pk }}">{{ p }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 my-2">
                                    <label for="severity">Crime Type</label>
                                    <select class="form-container form-control" name="crime_type" id="severity" required>
                                        {% for ct in all_case_types %}
                                            <option {% if current_case_type == ct.crime %} selected {% endif %}value="{{ ct.pk }}">{{ ct.crime }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-group col-md-12 my-2">
                                    <label for="description">Case description</label>
                                    <textarea class="form-control" id="description" name="case_description" rows="7">{{ case.description }}</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label for="evidence">Evidence/Evidences</label>
                                    <input type="file" name="evidence" class="form-control" multiple id="evidence">
                                </div>
                                <div class="form-group col-md-12">
                                    <label for="location">Add location</label>
                                    <input type="button" onclick="displayModalMap()"
                                        class="btn btn-primary form-control" data-toggle="modal"
                                        data-target="#locationModal" value="Add location">
                                </div>
                                
                            </div>
                        </div>
                    </div>
                    <button class="mx-auto btn btn-primary mt-3" id="submit_Cbtn" style="width: 200px;">Submit</button>
                    {% include "case/map_modal.html" %}
                </form>
            </div>
        </div>
    </div>
</div>
